<?php
error_reporting(E_ALL ^ E_WARNING); 
$curl = curl_init();

curl_setopt_array($curl, array(
  CURLOPT_URL => 'https://www.expedia.co.uk/graphql',
  CURLOPT_RETURNTRANSFER => true,
  CURLOPT_ENCODING => '',
  CURLOPT_MAXREDIRS => 10,
  CURLOPT_TIMEOUT => 0,
  CURLOPT_FOLLOWLOCATION => true,
  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
  CURLOPT_CUSTOMREQUEST => 'POST',
  CURLOPT_POSTFIELDS =>'[{"operationName":"PropertyReviewsQuery","variables":{"context":{"siteId":3,"locale":"en_GB","eapid":0,"currency":"GBP","device":{"type":"DESKTOP"},"identity":{"duaid":"c72b450b-8d07-4c43-a7ce-498598ed2c5e","expUserId":"-1","tuid":"-1","authState":"ANONYMOUS"},"privacyTrackingState":"CAN_TRACK","debugContext":{"abacusOverrides":[],"alterMode":"RELEASED"}},"propertyId":"4481","searchCriteria":{"primary":{"dateRange":{"checkInDate":{"day":28,"month":2,"year":2022},"checkOutDate":{"day":8,"month":3,"year":2022}},"destination":{"regionName":"London (and vicinity), England, United Kingdom","regionId":"178279","coordinates":null,"pinnedPropertyId":null,"propertyIds":null,"mapBounds":null},"rooms":[{"adults":2,"children":[]}]},"secondary":{"booleans":[{"id":"includeRecentReviews","value":true},{"id":"includeRatingsOnlyReviews","value":true}],"counts":[{"id":"startIndex","value":0},{"id":"size","value":2000}],"selections":[{"id":"sortBy","value":"NEWEST_TO_OLDEST"}]}}},"query":"query PropertyReviewsQuery($context: ContextInput!, $propertyId: String!, $searchCriteria: PropertySearchCriteriaInput!) {\\n  propertyInfo(context: $context, propertyId: $propertyId) {\\n    id\\n    reviewInfo(searchCriteria: $searchCriteria) {\\n      summary {\\n        seeAllReviewsCallToActionLabel\\n        accessibilityLabel\\n        ...PropertyReviewsBreakdownFragment\\n        __typename\\n      }\\n      ...__PropertyReviewsListFragment\\n      ...__WriteReviewLinkFragment\\n      __typename\\n    }\\n    __typename\\n  }\\n}\\n\\nfragment PropertyReviewsBreakdownFragment on PropertyReviewSummary {\\n  averageOverallRating {\\n    formatted\\n    __typename\\n  }\\n  superlative\\n  propertyReviewCountDetails {\\n    shortDescription\\n    __typename\\n  }\\n  reviewDisclaimer\\n  reviewDisclaimerLabel\\n  ...ReviewDisclaimerFragment\\n  totalCount {\\n    raw\\n    __typename\\n  }\\n  ...ReviewSummaryDetailsFragment\\n  ...RatingCountsFragment\\n  __typename\\n}\\n\\nfragment ReviewDisclaimerFragment on PropertyReviewSummary {\\n  reviewDisclaimer\\n  reviewDisclaimerLabel\\n  reviewDisclaimerAccessibilityLabel\\n  __typename\\n}\\n\\nfragment ReviewSummaryDetailsFragment on PropertyReviewSummary {\\n  reviewSummaryDetails {\\n    label\\n    formattedRatingOutOfMaxA11y {\\n      value\\n      accessibilityLabel\\n      __typename\\n    }\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment RatingCountsFragment on PropertyReviewSummary {\\n  ratingCounts {\\n    count {\\n      formatted\\n      __typename\\n    }\\n    percent\\n    rating\\n    description\\n    accessibilityLabel\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment __PropertyReviewsListFragment on PropertyReviews {\\n  summary {\\n    paginateAction {\\n      text\\n      analytics {\\n        referrerId\\n        linkName\\n        __typename\\n      }\\n      __typename\\n    }\\n    __typename\\n  }\\n  reviews {\\n    ...ReviewParentFragment\\n    managementResponses {\\n      ...ReviewChildFragment\\n      __typename\\n    }\\n    reviewInteractionSections {\\n      primaryDisplayString\\n      reviewInteractionType\\n      __typename\\n    }\\n    __typename\\n  }\\n  ...NoResultsMessageFragment\\n  reviewFlag {\\n    ...ReviewFlagFragment\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment ReviewParentFragment on PropertyReview {\\n  id\\n  superlative\\n  locale\\n  title\\n  brandType\\n  reviewScoreWithDescription {\\n    label\\n    value\\n    __typename\\n  }\\n  text\\n  stayDuration\\n  submissionTime {\\n    longDateFormat\\n    __typename\\n  }\\n  themes {\\n    ...ReviewThemeFragment\\n    __typename\\n  }\\n  ...FeedbackIndicatorFragment\\n  ...AuthorFragment\\n  ...PhotosFragment\\n  ...TravelersFragment\\n  ...ReviewTranslationInfoFragment\\n  ...PropertyReviewSourceFragment\\n  ...PropertyReviewRegionFragment\\n  __typename\\n}\\n\\nfragment AuthorFragment on PropertyReview {\\n  reviewAuthorAttribution {\\n    text\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment PhotosFragment on PropertyReview {\\n  id\\n  photos {\\n    description\\n    url\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment TravelersFragment on PropertyReview {\\n  travelers\\n  __typename\\n}\\n\\nfragment ReviewThemeFragment on ReviewThemes {\\n  icon {\\n    id\\n    __typename\\n  }\\n  label\\n  __typename\\n}\\n\\nfragment FeedbackIndicatorFragment on PropertyReview {\\n  reviewInteractionSections {\\n    primaryDisplayString\\n    accessibilityLabel\\n    reviewInteractionType\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment ReviewTranslationInfoFragment on PropertyReview {\\n  translationInfo {\\n    loadingTranslationText\\n    targetLocale\\n    translatedBy {\\n      description\\n      __typename\\n    }\\n    translationCallToActionLabel\\n    seeOriginalText\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment PropertyReviewSourceFragment on PropertyReview {\\n  propertyReviewSource {\\n    accessibilityLabel\\n    graphic {\\n      description\\n      id\\n      size\\n      token\\n      url {\\n        value\\n        __typename\\n      }\\n      __typename\\n    }\\n    text {\\n      value\\n      __typename\\n    }\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment PropertyReviewRegionFragment on PropertyReview {\\n  reviewRegion {\\n    id\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment ReviewChildFragment on ManagementResponse {\\n  id\\n  header {\\n    text\\n    __typename\\n  }\\n  response\\n  __typename\\n}\\n\\nfragment NoResultsMessageFragment on PropertyReviews {\\n  noResultsMessage {\\n    __typename\\n    ...MessagingCardFragment\\n    ...EmptyStateFragment\\n  }\\n  __typename\\n}\\n\\nfragment MessagingCardFragment on UIMessagingCard {\\n  graphic {\\n    __typename\\n    ... on Icon {\\n      id\\n      description\\n      __typename\\n    }\\n  }\\n  primary\\n  secondaries\\n  __typename\\n}\\n\\nfragment EmptyStateFragment on UIEmptyState {\\n  heading\\n  body\\n  __typename\\n}\\n\\nfragment ReviewFlagFragment on ReviewFlag {\\n  reviewFlagDialog {\\n    ...ReviewReportFlagTriggerFragment\\n    __typename\\n  }\\n  reviewFlagToast {\\n    value\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment ReviewReportFlagTriggerFragment on PropertyReviewFlagDialog {\\n  ...ReviewFlagDialogFragment\\n  trigger {\\n    icon {\\n      description\\n      id\\n      __typename\\n    }\\n    value\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment ReviewFlagDialogFragment on PropertyReviewFlagDialog {\\n  content {\\n    communityInfo\\n    partnerInfo\\n    flagOptions {\\n      label\\n      options {\\n        label\\n        optionValue\\n        isSelected\\n        __typename\\n      }\\n      __typename\\n    }\\n    partnerLink {\\n      value\\n      link {\\n        target\\n        uri {\\n          value\\n          __typename\\n        }\\n        __typename\\n      }\\n      icon {\\n        description\\n        id\\n        __typename\\n      }\\n      __typename\\n    }\\n    primaryUIButton {\\n      primary\\n      icon {\\n        description\\n        id\\n        __typename\\n      }\\n      __typename\\n    }\\n    __typename\\n  }\\n  toolbar {\\n    icon {\\n      description\\n      id\\n      __typename\\n    }\\n    title\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment __WriteReviewLinkFragment on PropertyReviews {\\n  writeReviewLink {\\n    link {\\n      uri {\\n        value\\n        relativePath\\n        __typename\\n      }\\n      clientSideAnalytics {\\n        referrerId\\n        linkName\\n        __typename\\n      }\\n      __typename\\n    }\\n    value\\n    accessibilityLabel\\n    __typename\\n  }\\n  __typename\\n}\\n"}]',
  CURLOPT_HTTPHEADER => array(
    'authority: www.expedia.co.uk',
    'sec-ch-ua: " Not A;Brand";v="99", "Chromium";v="96", "Google Chrome";v="96"',
    'dnt: 1',
    'sec-ch-ua-mobile: ?0',
    'user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.93 Safari/537.36',
    'client-info: shopping-pwa,c04ea41051335e8eba7705e2c64dc7bcb30ec10e,us-west-2',
    'content-type: application/json',
    'accept: */*',
    'sec-ch-ua-platform: "Windows"',
    'x-page-id: page.Hotels.Infosite.Information,H,30',
    'origin: https://www.expedia.co.uk',
    'sec-fetch-site: same-origin',
    'sec-fetch-mode: cors',
    'sec-fetch-dest: empty',
    'referer: https://www.expedia.co.uk/London-Hotels-London-Marriott-Hotel-Regents-Park.h4481.Hotel-Information?chkin=2022-03-07&chkout=2022-03-08&x_pwa=1&rfrr=HSR&pwa_ts=1645460891206&referrerUrl=aHR0cHM6Ly93d3cuZXhwZWRpYS5jby51ay9Ib3RlbC1TZWFyY2g%3D&useRewards=false&rm1=a2&regionId=178279&destination=London+%28and+vicinity%29%2C+England%2C+United+Kingdom&destType=MARKET&neighborhoodId=553248635976383131&trackingData=AAAAEOhOOK_g20rvY3WcErbCwOuPrmpBR17FrE8rtfkMhux_kndNrr-LfzFptReL3RMwpxM16MWvRtG_K8C6SCgDqGa6ZegNJMvwvr-_OYlD3fNr7hEY6QCLrBZOLE8DN-P7tAZtqINCTi3gfppfZ1QzVO7XCVk0DnbUupoonXayEYq1emkF2RYidjp2wI8hyb5RjNW20w8Ie3-6F3q1Nosd7Me8i08Hsj6jS0i0DMaiQpfU9PasE9Hot8I85SfMK9vZGpn5QruNRQEolfmIqJyiwCJhA4jfjPhbNJqE5zNjDfpJ1z7ldzcjPhR7s4knAkFuQIVxQ4ciQRRUo5EYtENQJAF9SqPd7B_0ETGXOXHtjb1-mj7-n4X3zAkCTKHhwEiZThSnDRuF1MPg0ldiVqpl-vWmlXg249NlpReBVtCu8BFd6-wuxh82GlZ2lF4X0Lt4Uimej0v5fVMjXxo807NA2Unr2BW5w6HT3znwPZKg5KtezpSfMj7dzI2TzP1Z8kkQPVuv3lSHqL-vEXhemJwNlFepp8c8KaDmJKxQDFX5qLZiHR3qIz3Z7ce8DYhyP5NYE8vh50dEfXVZVpx3c0DHCpzQapYBe61bS6HRtAWPRjwFsWTugz2VE3RKmYWU8-5P3RdIAE-UfS6cl5XmV3aZApzm-syStLARf49iOCixDAaQFoNRuxnfUZrJO0jAUpu5krUCRxdIDI9s9BAMpA_yS2DB16IeNutCvQl6SoJQAhiQSTLX1_vSL5NFJDlNCLXtwYCxSZAWA2vQbi2vLQk20P5m_khgUrtVmpwimDYFLs4rfQMwiqOiLaxbvAEH8VCgd0pIl4ux23X_fCNswoE7zAPDNCSkU47BWnLQCqZ7sVmP6q0bdEdK0S12nLfzeRhYx8VlwmnF0DaK5snA9zsMYiSZ1WqL_G692rE9XadBFK5ZTny5syCeMCv-574kBoqAI3PyxfrRbYM1escXBeQOS7oNawjOuQ4V-t3w3_rpzV7kD_J5dIi8xwv5r-LW_o-YZZdwYXRUO6UldxLv8BPsmq0WI-HsYyLJejHUWv9U-2G_i3LZbm5lNmeKkt2k8zQzrdvuhxbogq_XqQtU4dpu47atotn4COV48Cjs6A-RHksOHfVvYhh1N0rm4h_AIKR7-Q%3D%3D&rank=1&testVersionOverride=Buttercup%2C31936.102311.0%2C33775.98848.1%2C38414.114301.0%2C40794.121819.2%2C38427.115718.1%2C42444.123988.0%2C42876.124673.0%2C42973.124182.1%2C42974.123984.1%2C42975.124629.0%2C42976.125426.1%2C42802.125960.1%2C33739.99567.0%2C37898.109354.0%2C37930.119094.0&slots=HSR_A&position=1&beaconIssued=2022-02-21T16%3A28%3A09&sort=RECOMMENDED&top_dp=203&top_cur=GBP&semdtl=&userIntent=&selectedRoomType=92614&selectedRatePlan=382803452',
    'accept-language: en-US,en;q=0.9',
    'cookie: MC1=GUID=c72b450b8d074c43a7ce498598ed2c5e; DUAID=c72b450b-8d07-4c43-a7ce-498598ed2c5e; linfo=v.4,|0|0|255|1|0||||||||2057|0|0||0|0|0|-1|-1; CRQSS=e|0; CRQS=t|3`s|3`l|en_GB`c|GBP; currency=GBP; iEAPID=0; tpid=v.1,3; HMS=5ea17358-bbe7-427e-a7a2-cd1be23e4b80; bm_sz=FB34B46FAF224D7B57F2FD06D4033B9B~YAAQXZ4QAmYMkil/AQAA6FqgOw5R8qmuGBGHbuHbtJ521Nr3XjyVyuoqRtLQRS2qofS/mB3xXU72q5oFsuugvIPsq4pM3PTQF/Utp/uTnOufZiXTpGKJcMnaKSUnRXM9vgL/ofBIwzO2DVVMoITvP+1iUvYO6jmK0FyiY93+epqH5WLy8q77mI8xhQAJRHHmrv+ew+nsh97l65YfAbCj21BqHUPBXd0m4Rj2euTYo6aYEpndcHc8lkEKrcUtoch6+oXyqRJUsg45V/a2FtOXwPRS5fsFtQn9psI9irPIn8b33DNfJaU=~4272451~3425091; osano_consentmanager_uuid=0572164a-b466-431b-8db2-41551d7bf7a7; osano_consentmanager=aYE2JNkABs64NKV486U8iR0JxX8LWaaH0B_EC0NDYNJ03YX5jlyQ3zYJPb3EsWQOURf3oVnZPDrW2RW45ijikdVnJDciXcFPeTlY6i5BCsiDBEH1aqzGe6-pRO-_sFNmxYjQXIurD01DKZB8s7eo8MUCRVCmGJPKGN9-SZNpeZKwKocA6Apyh0qhH6UaMUGmLk2b-mc7X963DFS0vv1rs1QShGBYJT7q1LQ61Y2SNlKf5kjqO89Wvt10zpjyt6LRYWlgwR5e4-miSaVY1WeQceve__GXHAUzFMn5Eg==; OIP=gdpr|1; AMCVS_C00802BE5330A8350A490D4C%40AdobeOrg=1; AMCV_C00802BE5330A8350A490D4C%40AdobeOrg=1585540135%7CMCIDTS%7C19051%7CvVersion%7C4.4.0%7CMCMID%7C87829416753358628513384660198028639127%7CMCAID%7CNONE%7CMCOPTOUT-1645980059s%7CNONE%7CMCAAMLH-1646577659%7C3%7CMCAAMB-1646577659%7Cj8Odv6LonN4r3an7LhD3WZrU1bUpAkFkkiY1ncBR96t2PTI%7CMCCIDH%7C-2034012538; AWSELB=D79B53F10ADCF9DDDF09C7B84896C09A6222EC2F5DC82C53E2E9201DC264A9501B993E825110F61A2806C2D4750D19798F8FBCECC184569BCEE8ED602271122EB1A107C7BB; AWSELBCORS=D79B53F10ADCF9DDDF09C7B84896C09A6222EC2F5DC82C53E2E9201DC264A9501B993E825110F61A2806C2D4750D19798F8FBCECC184569BCEE8ED602271122EB1A107C7BB; __gads=ID=231837742c2b237c-226e7b8d1cd1003e:T=1645972860:S=ALNI_MZuLbs7yK1QQ8pOTYmfxsuDFs5RJg; qualtrics_sample=true; qualtrics_SI_sample=true; _gcl_au=1.1.684552873.1645972868; _fbp=fb.2.1645972869135.716466287; _gid=GA1.3.1054368889.1645972872; xdid=c396aeb3-8ac4-4af5-a43a-cf2687a73f78|1645972873|expedia.co.uk; ak_bmsc=0575EA75A1B22A05B9750F500618CBA1~000000000000000000000000000000~YAAQXZ4QAsQMkil/AQAAMeOgOw7iDug3YWj8zGHDzcAdjKCTjjeZ9HGd7R7jFWMevkmR90tXoFnk5QEZ/TV2EVv9MbnuunV/nE+35h8T2duCkBz9F8QKHmwr+jxi75JrO+vydo84greDasdpui0KP46f4Iwac4/chdd7cD8JbQ6IC6kjIPipb7s7z09rh1G30OidRQ9p0Xv17c8yMINkiV7f9RG7KFKq8wrF7wAoz+ViJPEIbQrOheFo2jDPCtlIvz07oI0yi8FEV87yTp8w3OcV5qXj8ItVYc9syMv/aPouFxiAq3pIU7MiiRjhJyJXfYwGGj3drJhf+wta76wNmv2hWoa2LH3QWjuSJttHzuxNYYWEg/0/506dU2yO1WSI9W87B4R/GyJEDEOYt2F6ju1wDZ8M6g/durI4B727+abd7ISw4sOkSRbDNEVD10m6Es/+GiLSbhx58ulJe2surlEn8Y1T706MdUBGIwPppVxsidIJ6x2gP/MP0zA3QW43wiKr0eONQmUTWy8/k3WN; JSESSIONID=0AB66495FB9D2AC13BFAA2449A9C08E6; _abck=5E5CE4F0C0FFA356E5900E5A47F187BA~0~YAAQXZ4QAq0wkil/AQAAAV+8Owfw79oUxITjBdj6AVsLfZ6/WB3Qlkq3yfkg1J6XAVIUdJz0tNwg4kh22H5mUVD8FJuU7Ia0QMwLA54P9H+SQSzEHDOVs9vKcjXwHdB/1p2xqxiFsf2KNF4okwSGkvFl4USe5fGyGLkVu36rOmuWt2xUJkOWNy1FQ7opPDPlP83opJH71N8jGL5AX4GUY/RGUucLeS+wWW6zZB+r8ALO83ARdsFXCyEXSetAthUcQ/IUOxsrH1d7xSvZ1W+LN2Ys7I4Qczk1dfstJKrBxipBW++mcHkmOwNWnmgCIn6p7vcVNRGxEi+iHzwzo12v8NdC3pt9DakheOQn9cbmGSic4B6zDtMvaTAXTvcSG+r9xQBdvUg9O6kOSVRKOU9C7jgJYMA7jLv+NfH2~-1~-1~1645978195; CONSENTMGR=ts:1645974679708%7Cconsent:true; utag_main=v_id:017f3ba0b58c0016eb6e9c3c14590507207f106a0086e$_sn:1$_se:4$_ss:0$_st:1645976479754$ses_id:1645972862356%3Bexp-session$_pn:4%3Bexp-session; _uetsid=4c2dee7097db11ecbed98359d7ed64e4; _uetvid=4c32f5f097db11eca7e101e0523d5ae6; _ga=GA1.3.1019339148.1645972861; _gat_gtag_UA_35711341_2=1; _ga_8HQXZ49CXH=GS1.1.1645972864.1.1.1645974682.0; cesc=%7B%22marketingClick%22%3A%5B%22false%22%2C1645974705187%5D%2C%22hitNumber%22%3A%5B%2219%22%2C1645974705187%5D%2C%22visitNumber%22%3A%5B%221%22%2C1645972838949%5D%2C%22entryPage%22%3A%5B%22page.Hotels.Infosite.Information%22%2C1645974705187%5D%7D; bm_sv=0B378CFC6B38916B2FABE38E15468DC7~TZqyxI6tD/tXtP28eWJK6wmhC5oQPmcgez3VfOQtC65qChUZ4M1Wzpr3ftctMM2DsiPRFIPq5vtDeBH6+ErFOm2JD+IPT+aXzICxDF8uwEDxnk9d0BNW+BZazUqilKfSHPnuLHf75KIbrCcrDbKudLU9QoG5NhOCVzH6lfUvB5k=; HMS=5ea17358-bbe7-427e-a7a2-cd1be23e4b80; _abck=5E5CE4F0C0FFA356E5900E5A47F187BA~-1~YAAQFp4QAq0nmB9/AQAAmtmtPAd4QWIr44xR6XLe+5Jl+UEdmrvQRfobripSdh9Bpno8+cftWxikagB2tj0VEeFk05TlXv4NERb8gGTymjCCjjIptVF0myGU3AfHBWGvPaxzqVi80hHQclJ6c0bj12wC3lg37mB99gtMnRT8FICEMjjVuyDhAN8HL4JHVwcW+Rvc8gnMQ2VZ9SdXgsftWfW04nhGgxOH0P1YyJBwT++M35/C1BEyKhJzCGBuBr7WmT9X+e2Nv4oSwDn36u8724ZukCGa7GXeQZR0GzOJJsi5sWhPU8KGl7bA5dnHLNwLHqA7YVC4I5r53bHDtXNOxq+ld+BbvGwRJpiWAJKFKi2+Qks9NxXhNu5qM2sxN55Dsw==~0~-1~1645978195; cesc=%7B%22marketingClick%22%3A%5B%22false%22%2C1645990500688%5D%2C%22hitNumber%22%3A%5B%221%22%2C1645990500688%5D%2C%22visitNumber%22%3A%5B%222%22%2C1645990500688%5D%2C%22entryPage%22%3A%5B%22page.Hotels.Infosite.Information%22%2C1645990500688%5D%7D'
  ),
));


$response = curl_exec($curl);
$result = json_decode($response);
curl_close($curl);


$url = 'https://www.expedia.co.uk/London-Hotels-London-Marriott-Hotel-Regents-Park.h4481.Hotel-Information?chkin=2022-03-07&chkout=2022-03-08&x_pwa=1&rfrr=HSR&pwa_ts=1645460891206&referrerUrl=aHR0cHM6Ly93d3cuZXhwZWRpYS5jby51ay9Ib3RlbC1TZWFyY2g%3D&useRewards=false&rm1=a2&regionId=178279&destination=London+%28and+vicinity%29%2C+England%2C+United+Kingdom&destType=MARKET&neighborhoodId=553248635976383131&trackingData=AAAAEOhOOK_g20rvY3WcErbCwOuPrmpBR17FrE8rtfkMhux_kndNrr-LfzFptReL3RMwpxM16MWvRtG_K8C6SCgDqGa6ZegNJMvwvr-_OYlD3fNr7hEY6QCLrBZOLE8DN-P7tAZtqINCTi3gfppfZ1QzVO7XCVk0DnbUupoonXayEYq1emkF2RYidjp2wI8hyb5RjNW20w8Ie3-6F3q1Nosd7Me8i08Hsj6jS0i0DMaiQpfU9PasE9Hot8I85SfMK9vZGpn5QruNRQEolfmIqJyiwCJhA4jfjPhbNJqE5zNjDfpJ1z7ldzcjPhR7s4knAkFuQIVxQ4ciQRRUo5EYtENQJAF9SqPd7B_0ETGXOXHtjb1-mj7-n4X3zAkCTKHhwEiZThSnDRuF1MPg0ldiVqpl-vWmlXg249NlpReBVtCu8BFd6-wuxh82GlZ2lF4X0Lt4Uimej0v5fVMjXxo807NA2Unr2BW5w6HT3znwPZKg5KtezpSfMj7dzI2TzP1Z8kkQPVuv3lSHqL-vEXhemJwNlFepp8c8KaDmJKxQDFX5qLZiHR3qIz3Z7ce8DYhyP5NYE8vh50dEfXVZVpx3c0DHCpzQapYBe61bS6HRtAWPRjwFsWTugz2VE3RKmYWU8-5P3RdIAE-UfS6cl5XmV3aZApzm-syStLARf49iOCixDAaQFoNRuxnfUZrJO0jAUpu5krUCRxdIDI9s9BAMpA_yS2DB16IeNutCvQl6SoJQAhiQSTLX1_vSL5NFJDlNCLXtwYCxSZAWA2vQbi2vLQk20P5m_khgUrtVmpwimDYFLs4rfQMwiqOiLaxbvAEH8VCgd0pIl4ux23X_fCNswoE7zAPDNCSkU47BWnLQCqZ7sVmP6q0bdEdK0S12nLfzeRhYx8VlwmnF0DaK5snA9zsMYiSZ1WqL_G692rE9XadBFK5ZTny5syCeMCv-574kBoqAI3PyxfrRbYM1escXBeQOS7oNawjOuQ4V-t3w3_rpzV7kD_J5dIi8xwv5r-LW_o-YZZdwYXRUO6UldxLv8BPsmq0WI-HsYyLJejHUWv9U-2G_i3LZbm5lNmeKkt2k8zQzrdvuhxbogq_XqQtU4dpu47atotn4COV48Cjs6A-RHksOHfVvYhh1N0rm4h_AIKR7-Q%3D%3D&rank=1&testVersionOverride=Buttercup%2C31936.102311.0%2C33775.98848.1%2C38414.114301.0%2C40794.121819.2%2C38427.115718.1%2C42444.123988.0%2C42876.124673.0%2C42973.124182.1%2C42974.123984.1%2C42975.124629.0%2C42976.125426.1%2C42802.125960.1%2C33739.99567.0%2C37898.109354.0%2C37930.119094.0&slots=HSR_A&position=1&beaconIssued=2022-02-21T16%3A28%3A09&sort=RECOMMENDED&top_dp=203&top_cur=GBP&semdtl=&userIntent=&selectedRoomType=92614&selectedRatePlan=382803452';
$results_page=curl($url);

$document = new DOMDocument();
    $document->loadHTML($results_page);
    $xpath = new DOMXPath($document);

$rev['title'] = $document->getElementsByTagname('h1')[0]->nodeValue;
$rev['totalReviews'] = $xpath->evaluate('//meta[@itemprop="reviewCount"]/@content')->item(0)->value;
$reviews = $result[0]->data->propertyInfo->reviewInfo->reviews;

echo "<pre>";
foreach ($reviews as $key => $review) {
    $rev['reviews'][$key]['rating']      = $review->reviewScoreWithDescription->value;
    $rev['reviews'][$key]['reviewText']  = $review->text;
    $rev['reviews'][$key]['date']        = $review->submissionTime->longDateFormat;
    $rev['reviews'][$key]['author']      = $review->reviewAuthorAttribution->text;
}
  

function curl($url) {
// Assigning cURL options to an array
$options = Array(
 
CURLOPT_RETURNTRANSFER => TRUE,  // Setting cURL's option to return the webpage data
CURLOPT_FOLLOWLOCATION => TRUE,  // Setting cURL to follow 'location' HTTP headers
CURLOPT_AUTOREFERER => TRUE, // Automatically set the referer where following 'location' HTTP headers
CURLOPT_HEADER=> TRUE,
CURLOPT_CONNECTTIMEOUT => 1200,   // Setting the amount of time (in seconds) before the request times out
CURLOPT_TIMEOUT => 1200,  // Setting the maximum amount of time for cURL to execute queries
CURLOPT_MAXREDIRS => 10, // Setting the maximum number of redirections to follow
CURLOPT_USERAGENT => "Googlebot/2.1 (+http://www.googlebot.com/bot.html)",  // Setting the useragent
CURLOPT_URL => $url, // Setting cURL's URL option with the $url variable passed into the function
CURLOPT_ENCODING=>'gzip,deflate',
 
);
 
$ch = curl_init();  // Initialising cURL
curl_setopt_array($ch, $options);   // Setting cURL's options using the previously assigned array data in $options
 
$data = curl_exec($ch); // Executing the cURL request and assigning the returned data to the $data variable
$httpcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);//to check whether any error occur or not
if($httpcode!="200")
{
return "error";
}
 
return $data;   // Returning the data from the function
}

$data = json_encode($rev);
 echo $data;
  
$myfile = fopen(uniqid().".txt", "w") or die("Unable to open file!");
fwrite($myfile, $data);
fclose($myfile);